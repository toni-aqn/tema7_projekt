<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLANTE GURU</title>
    <link rel="stylesheet" href="style.css">

</head>

<body>
    <header>
        <div class="header_logo"><a href="index.html"><img src="logo/planteguru_white_logo_transparent_tyk.png" alt="logo"></a></div>

        <nav class="burgermenu">
            <div id="menuknap">☰</div>
            <ul id="menu" class="hidden">
                <li><a href="index.html">STARTSIDE</a></li>
                <li><a href="produkter.html">PRODUKTER</a></li>
                <li><a href="om.html">OM</a></li>
                <li><a href="kontakt.html">KONTAKT</a></li>
                <li>
                    <div>MIN KURV</div>
                    <img src="ikoner/basket_white_transparent.png" alt="kurv">
                </li>
                <div class="logo_burgermenu"><img src="logo/planteguru_white_logo_transparent_tyk.png" alt="logo"></div>
            </ul>

        </nav>
    </header>


    <h2 class="filterTekst">ALLE</h2>

    <nav class="filter_knapper">
        <button class="filter valgt" data-kategori="alle">ALLE</button>
        <button class="filter" data-favoritter="1">FAVORITTER</button>
        <button class="filter" data-kategori="indendoers">INDENDØRS</button>
        <button class="filter" data-kategori="udendoers">UDENDØRS</button>
        <button class="filter" data-kategori="potter">POTTER</button>
    </nav>


    <section class="data_container"></section>

    <template>
        <article>
            <div class="billed_ramme">
                <img src="" alt="img">
            </div>
            <h2></h2>
            <p class="kort_beskrivelse"></p>

        </article>
    </template>

    <footer>
        <p>FIGNESTRÆDE 12</p>
        <p>1234 KØBENHAVN K</p>
        <p>TLF. 11 22 33 44</p>
        <p>PLANTEGURU@MAIL.COM</p>
    </footer>


    <script src="script.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", hentjson);

        let planter;
        let filter = "alle";

        const listevisning = document.querySelector(".data_container");
        const template = document.querySelector("template");

        async function hentjson() {
            console.log("hentjson");

            let myRawjson = await fetch("https://spreadsheets.google.com/feeds/list/1pUeq7DL83r8HprlFhAdWsyy4jInr6mneRbFrKSbq2fY/od6/public/values?alt=json");

            planter = await myRawjson.json();
            //  console.log(myjson);

            informationer();
            addEventlistenerToButton();

        }

        function informationer() {
            console.log("køre");

            listevisning.innerHTML = "";


            planter.feed.entry.forEach((plante) => {

                if (filter == "alle" || filter == plante.gsx$kategori.$t || filter == plante.gsx$favoritter.$t) {


                    const klon = template.cloneNode(true).content;

                    klon.querySelector("img").src = `imgs/${plante.gsx$billede.$t}.jpg`;
                    klon.querySelector("article h2").textContent = ` ${plante.gsx$navn.$t}`;
                    klon.querySelector("article .kort_beskrivelse").textContent = ` ${plante.gsx$kort.$t}`;


                    listevisning.appendChild(klon);
                    listevisning.lastElementChild.addEventListener("click", () => {
                        location.href = `enkeltside.html?nr=${plante.gsx$id.$t}`;
                    });

                }

            });
        }

        function addEventlistenerToButton() {
            document.querySelectorAll(".filter").forEach(elm => {
                elm.addEventListener("click", filtrering);
            });
        }

        function filtrering() {

            if (this.dataset.kategori) {
                filter = this.dataset.kategori;

                document.querySelector("h2").textContent = this.textContent;
                document.querySelectorAll(".filter").forEach(elm => {
                    elm.classList.remove("valgt");
                    console.log(`${filter}`);
                });

                this.classList.add("valgt");

                informationer();
            } else if (this.dataset.favoritter) {
                filter = this.dataset.favoritter;

                document.querySelector("h2").textContent = this.textContent;
                document.querySelectorAll(".filter").forEach(elm => {
                    elm.classList.remove("valgt");
                    console.log(`${filter}`);
                });

                this.classList.add("valgt");

                informationer();
            }

        }
    </script>

    <script src="script.js"></script>

</body></html>
