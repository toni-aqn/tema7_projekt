<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLANTE GURU</title>
    <link rel="stylesheet" href="style.css">

</head>

<body>
    <header>
        <div class="logo"></div>
    </header>

    <h2 class="filterTekst">ALLE</h2>

    <nav>
        <button class="filter valgt" data-kategori="alle">ALLE</button>
        <button class="filter" data-favoritter="1">FAVORITTER</button>
        <button class="filter" data-kategori="indendoers">INDENDØRS</button>
        <button class="filter" data-kategori="udendoers">UDENDØRS</button>
        <button class="filter" data-kategori="potter">POTTER</button>

    </nav>


    <section class="data_container"></section>

    <template>
        <article>
            <img src="" alt="img">
            <h2></h2>
            <p class="kort_beskrivelse"></p>

        </article>
    </template>

    <footer>
        <p class="footer1">FIGNESTRÆDE 22</p>
        <p class="footer2">1234 KØBENHAVN K</p>
        <p class="footer3">TLF. XX XX XX XX</p>
        <p class="footer4">PLANTER@MAIL.DK</p>
    </footer>


    <script>
        document.addEventListener("DOMContentLoaded", hentjson);

        let planter;
        let filter = "alle";

        const listevisning = document.querySelector(".data_container");
        const template = document.querySelector("template");

        async function hentjson() {
            console.log("hentjson");

            let myRawjson = await fetch("https://spreadsheets.google.com/feeds/list/1pUeq7DL83r8HprlFhAdWsyy4jInr6mneRbFrKSbq2fY/od6/public/values?alt=json");

            planter = await myRawjson.json();
            //  console.log(myjson);

            informationer();
            addEventlistenerToButton();

        }

        function informationer() {
            console.log("køre");

            listevisning.innerHTML = "";


            planter.feed.entry.forEach((plante) => {

                if (filter == "alle" || filter == plante.gsx$kategori.$t || filter == plante.gsx$favoritter.$t) {


                    const klon = template.cloneNode(true).content;

                    klon.querySelector("img").src = `imgs/${plante.gsx$billede.$t}.jpg`;
                    klon.querySelector("article h2").textContent = ` ${plante.gsx$navn.$t}`;
                    klon.querySelector("article .kort_beskrivelse").textContent = ` ${plante.gsx$navn.$t}`;


                    listevisning.appendChild(klon);
                    listevisning.lastElementChild.addEventListener("click", () => {
                        location.href = `enkeltside.html?nr=${ret.gsx$id.$t}`;
                    });

                }

            });
        }

        function addEventlistenerToButton() {
            document.querySelectorAll(".filter").forEach(elm => {
                elm.addEventListener("click", filtrering);
            });
        }

        function filtrering() {

            if (this.dataset.kategori) {
                filter = this.dataset.kategori;

                document.querySelector("h2").textContent = this.textContent;
                document.querySelectorAll(".filter").forEach(elm => {
                    elm.classList.remove("valgt");
                    console.log(`${filter}`);
                });

                this.classList.add("valgt");

                informationer();
            } else if (this.dataset.favoritter) {
                filter = this.dataset.favoritter;

                document.querySelector("h2").textContent = this.textContent;
                document.querySelectorAll(".filter").forEach(elm => {
                    elm.classList.remove("valgt");
                    console.log(`${filter}`);
                });

                this.classList.add("valgt");

                informationer();
            }

        }
    </script>

</body></html>
