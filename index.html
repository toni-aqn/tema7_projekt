<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex">
    <title>PLANTE GURU</title>
    <link rel="stylesheet" href="style.css">

    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
    <link rel="manifest" href="favicon/site.webmanifest">
    <link rel="mask-icon" href="favicon/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#e8e6e2">
    <meta name="msapplication-config" content="favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

</head>

<body>
    <header>
        <nav class="burgermenu">
            <div id="menuknap">☰</div>
            <ul id="menu" class="hidden">
                <li><a class="valgt_menu" href="index.html">STARTSIDE</a></li>
                <li><a href="produkter.html">PRODUKTER</a></li>
                <li><a href="om.html">OM</a></li>
                <li><a href="kontakt.html">KONTAKT</a></li>
                <li>
                    <div class="min_kurv">MIN KURV</div>
                    <img src="ikoner/basket_white_transparent.png" alt="kurv">
                </li>
                <li>
                    <div class="logo_burgermenu"></div>
                </li>
            </ul>
        </nav>
        <div class="header_logo"><img src="logo/planteguru_white_logo_transparent_tyk.png" alt="logo"></div>
    </header>

    <section>

        <div id="splash">

            <div class="hiddenlogo">
                <div class="logo"><img src="logo/planteguru_white_logo_transparent_tyk.png" alt=" logo"></div>
                <a class="vis_produkter" href="produkter.html">VIS PRODUKTER</a>
            </div>

        </div>

        <h1 class="filterTekst">FAVORITTER</h1>


        <!-- "data_container" er destinationen for vores template-->
        <section class="data_container"></section>

        <!-- Vores webiste er gjort dynamisk ved at indsætte html på det her template vi har sat op -->
        <template>
            <article class="produkter_article">
                <div class="billed_ramme">
                    <img src="" alt="img">
                </div>
                <h2></h2>
                <p class="kort_beskrivelse"></p>

            </article>
        </template>
        <!-- Det data der sættes ind i vores template bliver hentet ind, efter vi løber vores liste af objekter igennem i javascript -->

        <footer>
            <p>FIGNESTRÆDE 12</p>
            <p>1234 KØBENHAVN K</p>
            <p>TLF. 11 22 33 44</p>
            <p>PLANTEGURU@MAIL.COM</p>
        </footer>

    </section>

    <script>
        document.addEventListener("DOMContentLoaded", hentjson);
        console.log("DOMContentLoaded, hentjson funktion kaldt");

        let planter;
        let filter = "alle";

        const listevisning = document.querySelector(".data_container");
        const template = document.querySelector("template");

        async function hentjson() {
            console.log("hentjson");

            let myRawjson = await fetch("https://spreadsheets.google.com/feeds/list/1pUeq7DL83r8HprlFhAdWsyy4jInr6mneRbFrKSbq2fY/od6/public/values?alt=json");

            planter = await myRawjson.json();
            //  console.log(myjson);

            informationer();

        }

        function informationer() {
            console.log("informationer kaldt");

            //Når funktionen køres, bliver alt forrigt html i templaten ryddet.
            listevisning.innerHTML = "";

            // Vi løber derefter vores liste i gennem og siger for hver gsx$favoritter.$t der findes i vores json, skal der på html'en længere oppe (destinationen), sættes en klon ind. Da vi har 6 ting med en værdi i "favoritter" svarer det til 6 elementer der bliver vist.
            planter.feed.entry.forEach((plante) => {

                if (plante.gsx$favoritter.$t) {

                    const klon = template.cloneNode(true).content;

                    //Der bliver peget på de DOM-elementer vi gerne vil indsætte content på -> contentet henter vi gennem vores json
                    klon.querySelector("img").src = `imgs/${plante.gsx$billede.$t}.jpg`;
                    klon.querySelector("article h2").textContent = ` ${plante.gsx$navn.$t}`;
                    klon.querySelector("article .kort_beskrivelse").textContent = ` ${plante.gsx$kort.$t}`;

                    //klon bliver smidt ind i vores data_container.
                    listevisning.appendChild(klon);

                    //Klikker man på et af elementerne bliver man sendt hen til enkeltside.html med elementet's id som ligger i vores json (Singleview)
                    listevisning.lastElementChild.addEventListener("click", () => {
                        location.href = `enkeltside.html?nr=${plante.gsx$id.$t}`;
                    });

                }

            });
        }
    </script>

    <script src="burgermenu.js"></script>
</body></html>
